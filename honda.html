<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Honda Product Detail - Borhan Auto Parts Centre</title>
  <meta name="description" content="Buy genuine Honda motorcycle spare parts from Borhan Auto Parts Centre. Select model, see price, pay advance and call to order." />
  <meta name="keywords" content="Honda parts, Honda spare parts, CB Shine parts, Honda brake shoe, Honda air filter, Borhan Auto" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f9fafb; --card:#fff; --brand:#dc2626; --text:#1e293b; --muted:#475569;
      --accent:#16a34a;
    }
    *{box-sizing:border-box}
    body{font-family:Roboto,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:var(--bg);color:var(--text)}
    header{background:var(--brand);color:#fff;padding:16px;text-align:center;font-weight:700}
    main{max-width:980px;margin:22px auto;padding:16px}
    .card{background:var(--card);border-radius:12px;padding:18px;box-shadow:0 6px 20px rgba(15,23,42,0.06)}
    .layout{display:grid;grid-template-columns:1fr 1fr;gap:20px}
    .media{border-radius:10px;overflow:hidden;background:#f3f4f6;padding:12px;display:flex;align-items:center;justify-content:center}
    .media img{width:100%;max-height:340px;object-fit:contain;display:block}
    .info{display:flex;flex-direction:column;gap:10px}
    h1{margin:0;font-size:1.6rem}
    .muted{color:var(--muted)}
    .price{color:var(--accent);font-weight:800;font-size:1.45rem}
    .controls{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-top:8px}
    select,input[type="number"]{padding:10px;border-radius:8px;border:1px solid #e6eef6;background:#fff;min-width:160px}
    .btn{display:inline-block;padding:12px 18px;background:var(--brand);color:#fff;border-radius:8px;text-decoration:none;font-weight:700;text-align:center}
    .btn:hover{filter:brightness(.95)}
    .note{background:#fff7ed;border:1px solid #fde68a;padding:10px;border-radius:8px;color:#92400e}
    .models-list{margin-top:12px}
    ul.models{list-style:disc;margin-left:20px;color:var(--muted)}
    @media(max-width:900px){.layout{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>Honda Product Detail - Borhan Auto Parts Centre</header>

  <main>
    <div class="card">
      <div class="layout">
        <div class="media" id="media">
          <img id="product-img" src="images/honda-product.jpg" alt="Honda product image" loading="lazy">
        </div>

        <div class="info">
          <span id="badge" style="display:inline-block;background:#facc15;padding:6px 10px;border-radius:999px;font-weight:800;text-transform:uppercase;font-size:.85rem">New</span>
          <h1 id="title">Loading…</h1>
          <div class="muted" id="subtitle">Product details below</div>

          <div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin-top:8px">
            <div>
              <label for="model-select" class="muted" style="display:block;font-size:.9rem;margin-bottom:6px">Select Model</label>
              <select id="model-select" aria-label="Select bike model"></select>
            </div>

            <div>
              <label class="muted" style="display:block;font-size:.9rem;margin-bottom:6px">Quantity</label>
              <input id="qty" type="number" min="1" value="1" />
            </div>
          </div>

          <p id="desc" class="muted" style="margin-top:12px;line-height:1.5">—</p>

          <div style="display:flex;justify-content:space-between;align-items:center;margin-top:6px">
            <div>
              <div class="muted" style="font-size:.95rem">Price</div>
              <div class="price" id="price">৳0</div>
            </div>

            <div style="text-align:right">
              <div class="muted" style="font-size:.95rem">Availability</div>
              <div id="availability" class="muted">In stock</div>
            </div>
          </div>

          <div class="note" style="margin-top:12px">
            ⚡ Advance required: <strong id="advance-amount">৳500</strong>. Pay advance via bKash (01707659954). Remaining cash on delivery displayed below.
          </div>

          <div style="display:flex;gap:12px;align-items:center;margin-top:12px">
            <div style="min-width:150px">
              <div class="muted" style="font-size:.9rem">Total</div>
              <div id="total" style="font-weight:800;font-size:1.15rem">৳0</div>
            </div>
            <div style="min-width:170px">
              <div class="muted" style="font-size:.9rem">Remaining COD</div>
              <div id="remaining" style="font-weight:800;font-size:1.15rem">৳0</div>
            </div>
          </div>

          <div class="controls" style="margin-top:14px">
            <a id="buy-now" class="btn" href="tel:+8801707659954">Buy Now (Call)</a>
            <a id="payment-link" class="btn" style="background:#0f172a;text-decoration:none" href="payment.html">Go to Payment</a>
          </div>
        </div>
      </div>

      <div class="models-list">
        <h3 style="margin:12px 0 8px 0">Compatible Bike Models</h3>
        <ul class="models" id="compatible-list"></ul>
      </div>
    </div>
  </main>

  <script>
    // ----- Data -----
    // central model list
    const HONDA_BIKE_MODELS = [
      "CB Shine",
      "CB Hornet 160R",
      "CB Trigger",
      "Livo",
      "Dream Neo",
      "Wave 125",
      "Hayate",
      "Dio",
      "Activa",
      "Navi",
      "CD 70",
      "Super Cub C125",
      "Gixxer SF",
      "Unicorn",
      "CBR 150R"
    ];

    // product catalog (extend as needed)
    const PRODUCTS = {
      "honda-brake-shoe": {
        name: "Honda Brake Shoe",
        basePrice: 500,
        badge: "New",
        desc: "Genuine Honda brake shoe — durable lining, low dust and perfect fit.",
        compatible: ["CB Shine", "Livo", "Dream Neo", "Hayate"]
      },
      "honda-air-filter": {
        name: "Honda Air Filter",
        basePrice: 480,
        badge: "Popular",
        desc: "High-flow air filter for cleaner intake and improved mileage.",
        compatible: ["CB Shine", "Unicorn", "Gixxer SF", "CBR 150R"]
      },
      "honda-spark-plug": {
        name: "Honda Spark Plug",
        basePrice: 350,
        badge: "New",
        desc: "Premium spark plug for reliable ignition and smooth starts.",
        compatible: ["CB Shine", "CB Hornet 160R", "CBR 150R", "Gixxer SF"]
      },
      "honda-clutch-cable": {
        name: "Honda Clutch Cable",
        basePrice: 450,
        badge: "New",
        desc: "Heavy-duty clutch cable for smooth clutch action and long life.",
        compatible: ["CB Shine", "Livo", "Wave 125", "Dream Neo"]
      }
    };

    // ----- Helpers -----
    const qs = (id) => document.getElementById(id);
    const params = new URLSearchParams(location.search);
    const productKey = params.get('product') || 'honda-brake-shoe';
    const initialModel = params.get('model') || '';

    function formatBDT(n){ return "৳" + Number(n).toLocaleString('en-US'); }

    // ----- Init -----
    function init(){
      const product = PRODUCTS[productKey] || Object.values(PRODUCTS)[0];
      // title & subtitle
      qs('title').textContent = product.name;
      qs('badge').textContent = product.badge;
      qs('subtitle').textContent = product.name + " — Borhan Auto Parts Centre";

      // description & compatible list
      qs('desc').textContent = product.desc;
      const compatList = qs('compatible-list');
      compatList.innerHTML = product.compatible.map(m => `<li>${m}</li>`).join('');

      // fill model select with master list, but show compatible ones first
      const modelSelect = qs('model-select');
      modelSelect.innerHTML = '';
      const putOption = (m, selected=false) => {
        const opt = document.createElement('option');
        opt.value = m;
        opt.textContent = m;
        if(selected) opt.selected = true;
        modelSelect.appendChild(opt);
      };

      // show compatible first
      const uniq = [...new Set([...product.compatible, ...HONDA_BIKE_MODELS])];
      uniq.forEach(m => putOption(m, m === initialModel));

      // set image (try model-specific image naming convention)
      setImage(productKey, initialModel);

      // set base price, update totals
      updatePrices(product.basePrice, parseInt(qs('qty').value, 10) || 1);

      // set badge UI
      qs('price').textContent = formatBDT(product.basePrice);

      // wire events
      modelSelect.addEventListener('change', () => {
        const selected = modelSelect.value;
        updateURLModel(selected);
        setImage(productKey, selected);
        // update subtitle & title to include model
        qs('title').textContent = product.name + (selected ? ' — ' + selected : '');
        qs('subtitle').textContent = product.name + (selected ? ' — ' + selected : '') + " - Borhan Auto Parts Centre";
      });

      qs('qty').addEventListener('change', () => {
        const qty = Math.max(1, parseInt(qs('qty').value, 10) || 1);
        qs('qty').value = qty;
        updatePrices(product.basePrice, qty);
      });

      // set buy-now (tel)
      qs('buy-now').href = 'tel:+8801707659954';

      // payment link: include product & model & price
      qs('payment-link').addEventListener('click', (e) => {
        e.preventDefault();
        const qty = parseInt(qs('qty').value,10) || 1;
        const selectedModel = qs('model-select').value;
        const totalPrice = (PRODUCTS[productKey] ? PRODUCTS[productKey].basePrice : product.basePrice) * qty;
        const url = `payment.html?product=${encodeURIComponent(product.name)}&model=${encodeURIComponent(selectedModel)}&price=${encodeURIComponent('৳'+totalPrice)}`;
        location.href = url;
      });
    }

    // update image with fallback: try images/<productKey>-<model>.jpg else images/<productKey>.jpg else default
    function setImage(productKey, model){
      const img = qs('product-img');
      const modelSlug = model ? model.toLowerCase().replace(/\s+/g,'-').replace(/[^a-z0-9\-]/g,'') : '';
      const tryPaths = [];
      if(modelSlug) tryPaths.push(`images/${productKey}-${modelSlug}.jpg`);
      tryPaths.push(`images/${productKey}.jpg`);
      tryPaths.push('images/honda-product.jpg');
      // attempt to load first that exists — since we can't check server, set first and set onerror to next
      let idx = 0;
      img.onerror = function(){
        idx++;
        if(idx < tryPaths.length) img.src = tryPaths[idx];
        else img.style.display = 'none';
      };
      img.src = tryPaths[0];
      img.alt = productKey.replace(/-/g,' ') + (model ? ' for ' + model : '');
    }

    function updatePrices(unitPrice, qty){
      const advanceFixed = 500;
      const total = unitPrice * qty;
      const remaining = Math.max(0, total - advanceFixed);
      qs('price').textContent = formatBDT(unitPrice);
      qs('total').textContent = formatBDT(total);
      qs('remaining').textContent = formatBDT(remaining);
      qs('advance-amount').textContent = formatBDT(advanceFixed);
    }

    function updateURLModel(model){
      const p = new URLSearchParams(location.search);
      p.set('model', model);
      history.replaceState(null, '', location.pathname + '?' + p.toString());
    }

    // run
    init();
  </script>
</body>
</html>
